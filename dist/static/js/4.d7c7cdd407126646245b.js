webpackJsonp([4],{"6+6k":function(e,t){},eAOU:function(e,t){},"m3/Z":function(e,t){},s6jD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),l=a.n(n),r=a("exGp"),i=a.n(r),s=a("bOdI"),o=a.n(s),c=a("Dd8w"),d=a.n(c),u=a("nuLj"),p={name:"DeviceForm",data:function(){return{dialogConf:{width:"700px",isShow:!1,center:!0,title:null},type:null,sendData:{},initData:{group:"下拉选择",deviceName:null,deviceId:null,deviceType:"下拉选择",address:null,remark:null},rules:{group:[{required:!0,message:"请选择归属分组",trigger:"change"}],deviceName:[{required:!0,message:"请输入设备名称",trigger:"blur"}],deviceId:[{required:!0,message:"请输入设备ID",trigger:"blur"}],deviceType:[{required:!0,message:"请选择设备型号",trigger:"change"}],address:[{required:!0,message:"请输入实际位置",trigger:"blur"}]},id:null}},methods:{init:function(e){var t=this,a=e.type,n=e.title,r=e.id,s=e.data;return i()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogConf.isShow=!0,t.id=r,t.type=a,n&&(t.dialogConf.title=n),"add"===a?t.sendData=u.a.deepCloneObject(t.initData):"update"===a&&(t.sendData=d()({},u.a.deepCloneObject(t.initData),s));case 5:case"end":return e.stop()}},e,t)}))()},submitForm:function(e){var t,a=this;this.$refs[e].validate((t=i()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||a.$message.error("请填写完表单");case 1:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))},resetForm:function(e){this.$refs[e].resetFields(),this.dialogConf.isShow=!1}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{attrs:{"dialog-conf":e.dialogConf}},[a("el-row",{staticClass:"app-form plat-form",attrs:{gutter:e.$store.state.config.dialogFormGutterWidth}},[a("el-form",{ref:"rhForm",attrs:{model:e.sendData,"label-position":e.$store.state.config.labelPosition,rules:e.rules,"label-width":"125px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:16,offset:3}},[a("el-form-item",{attrs:{label:"归属分组",prop:"group"}},[a("el-input",{attrs:{disabled:""},model:{value:e.sendData.group,callback:function(t){e.$set(e.sendData,"group",t)},expression:"sendData.group"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"deviceName"}},[a("el-input",{model:{value:e.sendData.deviceName,callback:function(t){e.$set(e.sendData,"deviceName",t)},expression:"sendData.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备ID",prop:"deviceId"}},[a("el-input",{model:{value:e.sendData.deviceId,callback:function(t){e.$set(e.sendData,"deviceId",t)},expression:"sendData.deviceId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号",prop:"deviceType"}},[a("el-input",{attrs:{disabled:""},model:{value:e.sendData.deviceType,callback:function(t){e.$set(e.sendData,"deviceType",t)},expression:"sendData.deviceType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际位置",prop:"address"}},[a("el-input",{model:{value:e.sendData.address,callback:function(t){e.$set(e.sendData,"address",t)},expression:"sendData.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.sendData.remark,callback:function(t){e.$set(e.sendData,"remark",t)},expression:"sendData.remark"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"app-submit-btns"},[a("el-form-item",{staticClass:"app-text-center"},[a("el-button",{on:{click:function(t){return e.submitForm("rhForm")}}},[e._v("\n                            保存\n                        ")]),e._v(" "),a("el-button",{staticClass:"resetForm",on:{click:function(t){return e.resetForm("rhForm")}}},[e._v("\n                            返回\n                        ")])],1)],1)])],1)],1)],1)},staticRenderFns:[]};var v={name:"SwitchDialog",data:function(){return{dialogConf:{width:"700px",isShow:!1,center:!0,title:null},type:null,sendData:{},id:null,table:{data:[],total:0,tableType:1,cols:[{key:"编号",label:"编号"},{key:"switchName",label:"开关名称"},{key:"switch",label:"操作"}]}}},methods:{init:function(e){var t=this,a=e.type,n=e.title,r=e.id;e.data;return i()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogConf.isShow=!0,t.id=r,t.type=a,n&&(t.dialogConf.title=n),t.table.data=[{"编号":1,switchName:"集控开关",switch:!0},{"编号":2,switchName:"集控开关-02",switch:!1}];case 5:case"end":return e.stop()}},e,t)}))()},submitForm:function(e){var t,a=this;this.$refs[e].validate((t=i()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||a.$message.error("请填写完表单");case 1:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))},resetForm:function(e){this.$refs[e].resetFields(),this.dialogConf.isShow=!1},handleCurrentChange:function(e){}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{attrs:{"dialog-conf":e.dialogConf}},[a("app-tables",{attrs:{table:e.table},on:{pageChange:e.handleCurrentChange},scopedSlots:e._u([{key:"column",fn:function(t){var n=t.data;return["switch"===n.col.key?[a("el-switch",{model:{value:n.row[n.col.key],callback:function(t){e.$set(n.row,n.col.key,t)},expression:"data.row[data.col.key]"}})]:[e._v(e._s(n.row[n.col.key]||"-"))]]}}])})],1)},staticRenderFns:[]};var h={name:"DeviceMange",components:{DeviceForm:a("VU/8")(p,f,!1,function(e){a("eAOU")},"data-v-0b31e187",null).exports,SwitchDialog:a("VU/8")(v,m,!1,function(e){a("6+6k")},"data-v-962e70cc",null).exports},watch:{filterText:function(e){this.$refs.tree.filter(e)}},data:function(){return{filterText:null,defaultProps:{children:"children",label:"label"},data:[{id:1,label:"西藏自治区旅游景区",children:[{id:4,label:"拉萨旅游景区",children:[{id:9,label:"扎木措"}]}]},{id:2,label:"四川省旅游景区",children:[{id:5,label:"成都"},{id:6,label:"阆中"}]}],utils:{left:[{label:"设备名称",slot:"query-1"},{label:"设备型号",slot:"query-2"},{slot:"query"},{slot:"add"}],cols:[24]},queryData:{pageNum:1,pageSize:10,deviceName:null,deviceType:null},table:{data:[],total:0,tableType:1,cols:[{key:"序号",label:"序号"},{key:"deviceName",label:"设备名称"},{key:"设备型号",label:"设备型号"},{key:"设备ID",label:"设备ID"},{key:"所属分组",label:"所属分组"},{key:"实际位置",label:"实际位置"},{key:"创建时间",label:"创建时间"},{key:"state",label:"设备状态"},{key:"备注",label:"备注"},{key:"switch",label:"开关"},{key:"operation",label:"操作"}]}}},created:function(){this.init()},methods:{init:function(){var e,t,a;this.table.data=[(e={"序号":1,deviceName:"设备一","设备ID":"V102","设备型号":"VSIN01","实际位置":"四川环球广场","所属分组":"四川","备注":"测试专用","创建时间":"2019-09-26 09:30:30",state:1},o()(e,"备注","测试"),o()(e,"switch",!0),e),(t={"序号":2,deviceName:"设备二","设备ID":"V102","设备型号":"VSIN01","实际位置":"四川环球广场","所属分组":"四川","备注":"测试专用","创建时间":"2019-09-26 09:30:30",state:2},o()(t,"备注","测试"),o()(t,"switch",!1),t),(a={"序号":3,deviceName:"设备三","设备ID":"V102","设备型号":"VSIN01","实际位置":"四川环球广场","所属分组":"四川","备注":"测试专用","创建时间":"2019-09-26 09:30:30",state:3},o()(a,"备注","测试"),o()(a,"switch",!0),a)]},handleCurrentChange:function(e){this.queryData.pageNum=e},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleDelete:function(e){var t=this;e.id;this.$confirm("此操作将会删除此条数据,是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning",center:!0,customClass:"bg-warning"}).then(i()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))).catch(function(){})},showDialog:function(e){var t=e.type,a=e.id,n=e.data;"add"===t?this.$refs.DeviceForm.init({type:t,title:"添加设备"}):"update"===t?this.$refs.DeviceForm.init({type:t,id:a,data:n,title:"修改设备"}):"switch_table"===t&&this.$refs.SwitchDialog.init({type:t,id:a,data:n,title:"开关设置"})}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_box"},[a("div",{staticClass:"content_tree"},[a("p",{staticClass:"tree_title"},[e._v("分组列表")]),e._v(" "),a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.data,props:e.defaultProps,"default-expand-all":"","highlight-current":!0,"filter-node-method":e.filterNode}})],1),e._v(" "),a("div",{staticClass:"content_table"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("app-table-utils",{attrs:{utils:e.utils}},[a("el-input",{attrs:{slot:"query-1"},slot:"query-1",model:{value:e.queryData.deviceName,callback:function(t){e.$set(e.queryData,"deviceName",t)},expression:"queryData.deviceName"}}),e._v(" "),a("el-input",{attrs:{slot:"query-2"},slot:"query-2",model:{value:e.queryData.deviceType,callback:function(t){e.$set(e.queryData,"deviceType",t)},expression:"queryData.deviceType"}}),e._v(" "),a("el-button",{staticClass:"queryBtn",attrs:{slot:"query"},slot:"query"},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"queryBtn",attrs:{slot:"add"},on:{click:function(t){return e.showDialog({type:"add"})}},slot:"add"},[e._v("添加设备")])],1),e._v(" "),a("div",{staticClass:"table-line"}),e._v(" "),a("app-tables",{attrs:{table:e.table},on:{pageChange:e.handleCurrentChange},scopedSlots:e._u([{key:"column",fn:function(t){var n=t.data;return["operation"===n.col.key?[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog({type:"update",data:n.row})}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n.row)}}},[e._v("删除")])]:"state"===n.col.key?[1==n.row[n.col.key]?a("p",[a("i",{staticClass:"normal_color"}),a("span",[e._v("正常")])]):2==n.row[n.col.key]?a("p",[a("i",{staticClass:"abnormal_color"}),a("span",[e._v("异常")])]):3==n.row[n.col.key]?a("p",[a("i",{staticClass:"offline_color"}),a("span",[e._v("离线")])]):e._e()]:"switch"===n.col.key?[a("el-switch",{model:{value:n.row[n.col.key],callback:function(t){e.$set(n.row,n.col.key,t)},expression:"data.row[data.col.key]"}})]:"deviceName"===n.col.key?[a("span",{staticClass:"deviveName_title_color",on:{click:function(t){return e.showDialog({type:"switch_table",data:n.row})}}},[e._v(e._s(n.row[n.col.key]||"-"))])]:[e._v(e._s(n.row[n.col.key]||"-"))]]}}])})],1)],1)],1),e._v(" "),a("device-form",{ref:"DeviceForm",on:{refresh:function(t){return e.init()}}}),e._v(" "),a("switch-dialog",{ref:"SwitchDialog",on:{refresh:function(t){return e.init()}}})],1)},staticRenderFns:[]};var y=a("VU/8")(h,b,!1,function(e){a("m3/Z")},"data-v-dbaaea76",null);t.default=y.exports}});
//# sourceMappingURL=4.d7c7cdd407126646245b.js.map